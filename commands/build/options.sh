# Generated by stubbs:add-option. Do not edit, if using stubbs.
# Created: Sun Sep 16 11:49:51 PDT 2012
#
#/ usage: rpm:build  --name|-n <>  --release|-r <> [ --topdir|-t </usr/src/rpm>]  --version|-v <> 

# print USAGE and exit
rerun_option_usage() {
    grep '^#/ usage:' <"$0" | cut -c4- >&2
    return 2
}

# check option has its argument
rerun_option_check() {
    [ "$1" -lt 2 ] && rerun_option_usage
}

# options: [name release topdir version]
while [ "$#" -gt 0 ]; do
    OPT="$1"
    case "$OPT" in
        --name|-n) rerun_option_check $# ; NAME=$2 ; shift ;;
        --release|-r) rerun_option_check $# ; RELEASE=$2 ; shift ;;
        --topdir|-t) rerun_option_check $# ; TOPDIR=$2 ; shift ;;
        --version|-v) rerun_option_check $# ; VERSION=$2 ; shift ;;
        # help option
        -?)
            rerun_option_usage
            exit 2
            ;;
        # end of options, just arguments left
        *)
          break
    esac
    shift
done

# If defaultable options variables are unset, set them to their DEFAULT
[ -z "$TOPDIR" ] && TOPDIR="/usr/src/rpm"
# Check required options are set
[ -z "$NAME" ] && { echo "missing required option: --name" >&2 ; return 2 ; }
[ -z "$RELEASE" ] && { echo "missing required option: --release" >&2 ; return 2 ; }
[ -z "$VERSION" ] && { echo "missing required option: --version" >&2 ; return 2 ; }
#
return 0
